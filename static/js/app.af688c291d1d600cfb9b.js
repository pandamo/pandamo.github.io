webpackJsonp([3],{HvkP:function(t,e){},Kdiv:function(t,e){},M2Yq:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("oIxZ"),o=n("mvHQ"),i=n.n(o),s=n("//Fk"),r=n.n(s),l=n("Gu7T"),c=n.n(l),u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loadingCover"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"}},[e("g",{attrs:{fill:"none",stroke:"#fff","stroke-width":"1.5"}},[e("circle",{attrs:{cx:"16",cy:"16",r:"14"}}),this._v(" "),e("circle",{attrs:{cx:"16",cy:"16",r:"4"}})]),this._v(" "),e("path",{attrs:{d:"M13 5a11.4 11.4 0 0 1 11.2 2.9m-1.8 1.8a9 9 0 0 0-8.8-2.4m.7 2.4a6.5 6.5 0 0 1 6.3 1.7M19 27a11.4 11.4 0 0 1-11.2-2.9m1.8-1.8a9 9 0 0 0 8.8 2.4m-.7-2.4a6.5 6.5 0 0 1-6.3-1.7",fill:"none",stroke:"#fff","stroke-linecap":"round"}})])])},staticRenderFns:[]};var d=n("nA64")(null,u,!1,function(t){n("gr7Q")},null,null).exports,p=n("Xkx3").icons,h={name:"svgBtn",props:["icoName"],computed:{svgCode:function(){return p[this.icoName]}},methods:{emit:function(){this.$emit("goPlay",this.icoName)}},mounted:function(){}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.icoName?n("svg",{attrs:{viewBox:"0 0 48 48"},on:{click:function(e){return t.emit()}}},[n("g",{domProps:{innerHTML:t._s(t.svgCode)}})]):t._e()},staticRenderFns:[]};var g=n("nA64")(h,m,!1,function(t){n("Z6w8")},null,null).exports,y={name:"list",props:["sondList","songId","isMobile","toggle"],components:{svgBtn:g},data:function(){return{}},methods:{artists:function(t){if(t)return" - "+t.map(function(t){return t.name}).join(",")},toggleShow:function(){this.$parent.toggle=!this.$parent.toggle},playThis:function(t){this.$emit("changeSong",t)},autoScroll:function(){var t=this;this.$nextTick(function(){document.getElementById("s"+t.songId).scrollIntoView({block:"center",behavior:"smooth"})})}},watch:{songId:function(t,e){this.autoScroll()}},created:function(){}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.isMobile?"mobileList":"list",{toggle:t.toggle&&t.isMobile}],on:{click:t.toggleShow}},[n("ul",t._l(t.sondList,function(e){return n("li",{key:e.id,class:{playing:t.songId==e.id},attrs:{id:"s"+e.id},on:{click:function(n){return t.playThis(e.id)}}},[t._v("\n      "+t._s(e.name)+" "),n("small",[t._v(t._s(t.artists(e.artist)))])])}),0)])},staticRenderFns:[]};var v=n("nA64")(y,f,!1,function(t){n("Kdiv")},null,null).exports,k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("button",{class:["recordStyle",{cdIcon:!this.cdStyle},{vinylIcon:this.cdStyle}],on:{click:this.changeStyle}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"}},[e("g",{attrs:{fill:"none",stroke:"#fff","stroke-width":"2"}},[e("circle",{staticClass:"outer",attrs:{cx:"16",cy:"16",r:"14"}}),this._v(" "),e("circle",{staticClass:"inner",attrs:{cx:"16",cy:"16",r:"4"}})]),this._v(" "),e("path",{staticClass:"light",attrs:{d:"M13 5a11.4 11.4 0 0 1 11.2 2.9m-1.8 1.8a9 9 0 0 0-8.8-2.4m.7 2.4a6.5 6.5 0 0 1 6.3 1.7M19 27a11.4 11.4 0 0 1-11.2-2.9m1.8-1.8a9 9 0 0 0 8.8 2.4m-.7-2.4a6.5 6.5 0 0 1-6.3-1.7",fill:"none",stroke:"#fff","stroke-linecap":"round"}}),this._v(" "),e("circle",{staticClass:"vinylInner",attrs:{fill:"#000",cx:"16",cy:"16",r:"1.3"}})])])},staticRenderFns:[]};var w=n("nA64")({name:"changeRecordStyleBtn",props:["cdStyle"],methods:{changeStyle:function(){this.$emit("changeFromBtn")}}},k,!1,function(t){n("HvkP")},null,null).exports,S={name:"controller",props:["songId","playWay","mp3"],data:function(){return{autoplay:!0,songSrc:"",playing:!1,playerDom:void 0,volume:parseFloat(localStorage.getItem("volume"))||.5,volumeTmp:parseFloat(localStorage.getItem("volume"))||.5,isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),percent:0}},components:{svgBtn:g},computed:{playWayIcon:function(){for(var t in this.playWay)if(this.playWay[t])return t},playingOrpause:function(){return this.playing?"pause":"play"},speakerIconVolume:function(){return[parseFloat(this.volume)>0,parseFloat(this.volume)>.33,parseFloat(this.volume)>.66]}},methods:{play:function(t){if(this.$emit("play",t),"play"===t){var e=!!this.playerDom.paused;this.playerDom.paused?this.playerDom.play():this.playerDom.pause(),this.$emit("play",e),this.$set(this,"playing",e)}},toggleList:function(){this.$parent.toggle=!this.$parent.toggle},audioError:function(){var t=this;this.$emit("canNotPlay","歌曲加载失败，自动播放下一首"),setTimeout(function(){t.$emit("play","next")},2e3)},muteOnoff:function(){this.volume=this.volume?0:parseFloat(this.volumeTmp)},showProgress:function(){var t=this.percent,e=document.getElementById("cc"),n=2*Math.PI*22;e.attributes["stroke-dasharray"].value=parseFloat(n*t).toFixed(2)+" "+parseFloat(n*(1-t)).toFixed(2),e.attributes["stroke-width"].value=0===t?"0":"2"}},watch:{songId:function(t,e){var n=this;this.songSrc=this.mp3?this.mp3:String(t).indexOf(".mp3")>0?t:"//music.163.com/song/media/outer/url?id="+t+".mp3",this.$emit("play",!0),setTimeout(function(){n.playerDom.error&&n.audioError()},1500)},volume:function(t){this.playerDom.volume=t,0!==t&&(this.volumeTmp=t),localStorage.setItem("volume",t)},percent:function(t){this.showProgress()}},mounted:function(){var t=this;this.$nextTick(function(){t.playerDom=document.getElementById("audioPlayer"),t.playerDom.volume=t.volume,t.playerDom.addEventListener("ended",function(){t.playWay.repeatOne?t.playerDom.play():t.$emit("play","next")}),t.playerDom.addEventListener("playing",function(){setInterval(function(){t.percent=parseFloat((t.playerDom.currentTime/t.playerDom.duration).toFixed(2))},500),t.$emit("play","play"),t.playing=!0}),t.playerDom.addEventListener("pause",function(){t.$emit("play","pause"),t.playing=!1}),t.$parent.isMobile||document.addEventListener("keyup",function(e){switch(e.keyCode){case 32:t.play("play");break;case 39:t.percent=0,t.play("next");break;case 37:t.percent=0,t.play("prev");break;case 38:t.volume=parseFloat(t.volume)>.9?1:(parseFloat(t.volume)+.1).toFixed(2);break;case 40:t.volume=parseFloat(t.volume)<.1?0:(parseFloat(t.volume)-.1).toFixed(2)}})})}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["controller",{mobileControll:t.isMobile}]},[n("audio",{staticStyle:{display:"none"},attrs:{id:"audioPlayer",src:t.songSrc,autoplay:t.autoplay,controls:""}}),t._v(" "),n("svgBtn",{staticClass:"smallIcon",attrs:{icoName:t.playWayIcon},on:{goPlay:function(e){return t.play(t.playWayIcon)}}}),t._v(" "),n("svgBtn",{attrs:{icoName:"prev"},on:{goPlay:function(e){return t.play("prev")}}}),t._v(" "),n("svg",{staticClass:"bigIcon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},on:{click:function(e){return t.play("play")}}},[n("path",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],attrs:{fill:"#fff",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 12v24l18-12-18-12z"}}),t._v(" "),n("path",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}],attrs:{fill:"none",stroke:"#fff","stroke-width":"3",d:"M18 14 v20 M30 14 v20","stroke-linecap":"round","stroke-linejoin":"round"}}),t._v(" "),n("circle",{attrs:{cx:"24",cy:"24",r:"22",fill:"none",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",opacity:".3"}}),t._v(" "),n("circle",{staticStyle:{transform:"rotate(-90deg)","transform-origin":"center"},attrs:{id:"cc",cx:"24",cy:"24",r:"22",fill:"none",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"0","stroke-dasharray":"0 140","stroke-dashoffset":"0"}})]),t._v(" "),n("svgBtn",{attrs:{icoName:"next"},on:{goPlay:function(e){return t.play("next")}}}),t._v(" "),t.isMobile?n("svgBtn",{staticClass:"smallIcon",attrs:{icoName:"listIcon"},on:{goPlay:t.toggleList}}):t._e(),t._v(" "),n("div",{staticClass:"volumeBar"},[n("svg",{staticClass:"speakerIcon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},on:{click:t.muteOnoff}},[n("path",{attrs:{fill:"#fff",d:"M3.503 7.688H1.518a.5.5 0 0 0-.5.5v7.623a.5.5 0 0 0 .5.5h1.985a.5.5 0 0 0 .5-.5V8.188a.5.5 0 0 0-.5-.5zm9.121-3.067a.497.497 0 0 0-.477-.036L5.602 7.534a.5.5 0 0 0-.294.456v8.02c0 .196.115.375.294.456l6.545 2.949a.498.498 0 0 0 .706-.456V5.041a.499.499 0 0 0-.229-.42z"}}),t._v(" "),n("g",{attrs:{fill:"none",stroke:"#fff","stroke-width":"1.5","stroke-linecap":"round"}},[n("path",{directives:[{name:"show",rawName:"v-show",value:t.speakerIconVolume[0],expression:"speakerIconVolume[0]"}],attrs:{d:"M14.549 9.806c.562.562.907 1.338.907 2.194 0 .858-.346 1.634-.907 2.194"}}),t._v(" "),n("path",{directives:[{name:"show",rawName:"v-show",value:t.speakerIconVolume[1],expression:"speakerIconVolume[1]"}],attrs:{d:"M16.703 7.65a6.137 6.137 0 0 1 1.8 4.349c0 1.7-.688 3.235-1.8 4.351"}}),t._v(" "),n("path",{directives:[{name:"show",rawName:"v-show",value:t.speakerIconVolume[2],expression:"speakerIconVolume[2]"}],attrs:{d:"M18.856 18.503C20.52 16.84 21.548 14.54 21.548 12s-1.028-4.839-2.692-6.503"}})])]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.volume,expression:"volume"}],attrs:{type:"range",min:"0",max:"1",step:".01"},domProps:{value:t.volume},on:{__r:function(e){t.volume=e.target.value}}})])],1)},staticRenderFns:[]};var M=n("nA64")(S,I,!1,function(t){n("M2Yq")},null,null).exports,x={name:"toast",props:["msg"],data:function(){return{isMObile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),show:!1}},watch:{msg:function(t,e){var n=this;t&&(this.show=!0,setTimeout(function(){n.show=!1},2e3))}}},P={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:[{toast:!this.isMObile},{hide:!this.show},{mobileToast:this.isMObile}],domProps:{innerHTML:this._s(this.msg)}})},staticRenderFns:[]};var _=n("nA64")(x,P,!1,function(t){n("pQuk")},null,null).exports,b=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),L={name:"App",components:{loadingCover:d,list:v,player:b?function(){return n.e(0).then(n.bind(null,"ZMdz"))}:function(t){n.e(1).then(function(){var e=[n("eXNn")];t.apply(null,e)}.bind(this)).catch(n.oe)},changeRecordStyleBtn:w,controller:M,toast:_,svgBtn:g},data:function(){return{api:"https://netease-cloud-music-api-alpha-puce.vercel.app/playlist/track/all?id=",staticApi:"../static/demoData.json",sondList:[],normalPlayList:[],randomPlayList:[],curSongIndex:0,curSongId:"",curSongInfo:{},songListId:location.search.split("=")[1]?location.search.split("=")[1]:53208352,cdStyle:!localStorage.getItem("cdStyle")||JSON.parse(localStorage.getItem("cdStyle")),playWay:b?{randomPlay:0,normalPlay:1,repeatOne:0}:localStorage.getItem("payWay")?JSON.parse(localStorage.getItem("payWay")):{randomPlay:0,normalPlay:1,repeatOne:0},playing:void 0,normalPlayNext:!0,toastMessage:"",isMobile:b,toggle:!b,inited:!1}},watch:{curSongId:function(t,e){this.curSongInfo=this.sondList.find(function(e,n){return e.id===t})},curSongIndex:function(t,e){var n=this;if(this.playWay.randomPlay)this.curSongId=this.sondList[this.randomPlayList[t]].id;else{var a=this.sondList.findIndex(function(t,e){return n.curSongInfo.id==t.id});0===a?this.curSongId=this.normalPlayNext?this.sondList[a+1].id:this.sondList[this.sondList.length-1].id:a===this.sondList.length-1?this.curSongId=this.normalPlayNext?this.sondList[0].id:this.sondList[a-1].id:this.curSongId=this.normalPlayNext?this.sondList[a+1].id:this.sondList[a-1].id}}},methods:{formatList:function(t){return t.map(function(t,e){var n=t.id,a=t.name,o=t.al,i=t.dt,s=t.ar.map(function(t){return{name:t.name}});return{id:n,name:a,cover:o.picUrl,length:i,artist:s,album:o.name}})},playSong:function(t){this.curSongId=t},goPlay:function(t){switch(t){case"play":this.playing=!0;break;case"pause":this.playing=!1;break;case"next":this.curSongIndex<this.sondList.length-1?this.curSongIndex++:this.curSongIndex=0,this.playing=!0,this.normalPlayNext=!0;break;case"prev":0===this.curSongIndex?this.curSongIndex=this.sondList.length-1:this.curSongIndex--,this.playing=!0,this.normalPlayNext=!1;break;case"randomPlay":this.playWay.randomPlay=0,this.playWay.normalPlay=1,this.normalPlayNext=!0;break;case"normalPlay":this.playWay.normalPlay=0,this.playWay.repeatOne=1;break;case"repeatOne":this.creatRandomList(),this.playWay.repeatOne=0,this.playWay.randomPlay=1}this.savePlayWay()},changeStyle:function(){this.cdStyle=!this.cdStyle,localStorage.setItem("cdStyle",this.cdStyle)},shuffle:function(t){for(var e=[].concat(c()(this.normalPlayList)),n=[],a=e.length;a>0;a--){var o=Math.floor(Math.random()*e.length);n.push(e.splice(o,1)[0])}return new r.a(function(t,e){t(n)})},creatRandomList:function(){var t=this;this.shuffle([].concat(c()(this.sondList))).then(function(e){t.randomPlayList=e})},creatPlayList:function(t){for(var e=this,n=0;n<t;n++)this.normalPlayList[n]=n;this.playWay.randomPlay?this.shuffle([].concat(c()(this.sondList))).then(function(t){e.randomPlayList=t,e.curSongId=e.sondList[t[0]].id}):this.curSongId=this.sondList[0].id,this.inited=!0},getData:function(){var t=this;this.$http.get(this.api+this.songListId,{timeout:3e4}).then(function(e){e.data.songs.length>1?(t.sondList=t.formatList(e.data.songs),t.creatPlayList(e.data.songs.length),t.inited=!0):t.getLocalData()}).catch(function(){t.getLocalData()})},getLocalData:function(){var t=this;localStorage.getItem("payWay")&&(this.playWay=JSON.parse(localStorage.getItem("payWay"))),this.$http.get(this.staticApi).then(function(e){t.sondList=e.data,t.creatPlayList(e.data.length)})},savePlayWay:function(){localStorage.setItem("payWay",i()(this.playWay))},popToast:function(t){var e=this;this.toastMessage=t,setTimeout(function(){e.toastMessage=""},2e3)}},created:function(){this.getData()}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:"fade"}},[!t.inited&&t.isMobile?n("loadingCover"):t._e()],1),t._v(" "),n("list",{attrs:{sondList:t.sondList,songId:t.curSongId,isMobile:t.isMobile,toggle:t.toggle},on:{changeSong:t.playSong}}),t._v(" "),n("player",{attrs:{songInfo:t.curSongInfo,cdStyle:t.cdStyle,playing:t.playing},on:{swipeCd:t.goPlay}}),t._v(" "),t.isMobile?t._e():n("changeRecordStyleBtn",{attrs:{cdStyle:t.cdStyle},on:{changeFromBtn:t.changeStyle}}),t._v(" "),n("controller",{attrs:{songId:t.curSongId,mp3:t.curSongInfo.mp3,playWay:t.playWay},on:{play:t.goPlay,canNotPlay:t.popToast}}),t._v(" "),n("br"),t._v(" ←：播上一首"),n("br"),t._v("↑ ：增加音量"),n("br"),t._v('↓ ：减少音量")"\n    v-if="!isMobile"\n  />\n\n  '),t.isMobile?n("small",{staticStyle:{position:"fixed",top:"2vw",right:"2vw","text-align":"right"}},[t._v("\n    30CM.COM\n    "),n("br"),t._v("MUSICBOX\n  ")]):n("small",{staticClass:"author"},[t._v("\n    QQ: 1562714\n    "),n("br"),t._v("weChat: Pandamo\n    "),n("br"),t._v("pandamo@gmail.com\n  ")]),t._v(" "),n("toast",{attrs:{msg:t.toastMessage}})],1)},staticRenderFns:[]};var N=n("nA64")(L,F,!1,function(t){n("z9Qo")},null,null).exports,$=n("WjM/"),B=n.n($);a.a.prototype.$http=B.a,a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:N},template:"<App/>"})},Xkx3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"icons",function(){return a});var a={next:'<g fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round"  stroke-linejoin="round"><path d="M13 13v22l14-11-14-11zM31 10v28"/></g>',prev:'<g fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round"  stroke-linejoin="round"><path d="M33 35V13L19 24l14 11zM15 38V10"/></g>',randomPlay:'<path fill="#FFF" d="M39.8 17.42l-8.06 4.66v-9.32z"/><path d="M8.2 35.24h4.62a8.97 8.97 0 0 0 7.87-4.65l5.1-8.84a8.99 8.99 0 0 1 7.8-4.5h2.62m-15.61 4.5a8.99 8.99 0 0 0-7.78-4.5H8.19m30.02 17.99H33.6a8.97 8.97 0 0 1-7.88-4.65" fill="none" stroke="#FFF" stroke-width="2" stroke-linecap="round"/>',normalPlay:'<path fill="none" stroke="#FFF" stroke-width="2" stroke-linecap="round" d="M37.61 21.52a8.7 8.7 0 0 1 1.4 4.73c0 4.96-4.2 9-9.4 9H18.39c-5.19 0-9.4-4.03-9.4-9s4.21-9 9.4-9h11.24"/><path fill="#FFF" d="M37.67 17.42l-8.08 4.66v-9.32z"/>',repeatOne:'<path fill="none" stroke="#FFF" stroke-width="2" stroke-linecap="round"  d="M37.61 21.52a8.7 8.7 0 0 1 1.4 4.73c0 4.96-4.2 9-9.4 9H18.39c-5.19 0-9.4-4.03-9.4-9s4.21-9 9.4-9h11.24"/><path fill="#FFF" d="M37.67 17.42l-8.08 4.66v-9.32zM27.04 30.5h-5.66V29h1.9v-5.81l-1.95.44v-1.56l3.83-.8v7.72h1.89v1.51z"/>',keyIcon:'<g fill="none" stroke="#fff" stroke-linecap="round" stroke-width="3"><path  d="M24 31.3V29c0-2.9 8.3-4.3 8.3-11.9 0-4.6-3.7-8.3-8.3-8.3s-8.3 3.7-8.3 8.3"/><path d="M24 38 v3"/></g>',listIcon:'<path fill="none" stroke="#fff" stroke-linecap="round" stroke-width="3" d="M8 14h0m8 0h22M8 24h0m8 0h22M8 34h0m8 0h22"/>'}},Z6w8:function(t,e){},gr7Q:function(t,e){},pQuk:function(t,e){},z9Qo:function(t,e){}},["NHnr"]);